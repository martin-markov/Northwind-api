@using Northwind.UI.Models
@using System.Linq
@{
    @model CustomerViewModel
    ViewBag.Title = "Details";
    double count = 0;
}
<div class="container">
    <h2>@Model.CustomerInfo.ContactName</h2>
    <h3>Customer details</h3>
    <p>
        <div>
            <span>Company Name:</span>
            <span>@Model.CustomerInfo.CompanyName</span>
        </div>
        <div>
            <span>Contact Title:</span>
            <span>@Model.CustomerInfo.ContactTitle</span>
        </div>
        <div>
            <span>Adress:</span>
            <span>@Model.CustomerInfo.Address , @Model.CustomerInfo.City , @Model.CustomerInfo.Region , @Model.CustomerInfo.Country , @Model.CustomerInfo.PostalCode</span>
        </div>
        <div>
            <span>Contact info:</span>
            <span>@Model.CustomerInfo.Phone , @Model.CustomerInfo.Fax</span>
        </div>
        @foreach (var order in Model.CustomerOrders.OrderBy(x => x.OrderDate))
        {

            <div>
                <span>@order.OrderDate:</span>
                <span>Total price: @order.TotalPrice</span>
            </div>
            if (@order.HasDiscontinuedProduct)
            {
                <div>
                    <span class="ui-icon-notice">One or more products are discontinued</span>
                </div>
            }
            if (@order.HasInsufficientQuantity)
            {
                <div>
                    <span class="ui-icon-notice">Products ordered are more than in stock</span>
                </div>
            }
        }
    </p>
</div>